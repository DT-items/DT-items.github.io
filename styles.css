/* 1) Подключаем кастомный шрифт */
@font-face {
  font-family: 'BeauMarchaisC';
  src: url('beaumarchaisc.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

:root {
  --background-tile: url('background.png');
  --tooltip-bg: url('tooltip-bg.png') center/cover no-repeat;
  --tooltip-width: 300px;
  --thumb-size: 80px;
  --thumb-hover-scale: 1.1;
  --transition: 0.2s ease;
  --top-bar-height: 60px;
  --global-scale: 0.8;
  --group-gap: 40px;
  --panel-width: 33.33vw;
  --divider-height: 56px;
  --divider-overflow: 20px; /* на сколько пикселей за края хотим выйти */
  --divider-overlap: 14px;
  --divider-scale:    0.9; 
  --page-panel-width: 300px;    /* ширина панели */
  --page-panel-height: 350px;   /* полная высота (контент + кнопка) */
  --page-button-height: 42px;    /* высота торчащей кнопки */
}

body {
  font-family: sans-serif;
  margin: 0;
  padding: calc(var(--top-bar-height) + 20px) 20px 20px;
  background-image: var(--background-tile);
  background-repeat: repeat;
}

/* фиксированная полоска сверху */
.top-bar {
  position: fixed;
  width: 100%;
  height: var(--top-bar-height);
  background: url('bar.png') no-repeat center/cover;
  z-index: 2000;
  transition: top 0.3s ease;
  top: 0; left: 0;
}

.top-bar .logo {
  position: fixed !important;
  left: 20px !important;
  /* привязываем к середине шапки: половина её высоты минус половина лого */
  top: calc(var(--top-bar-height)/2 - 20px) !important;
  /* снимаем translateY, чтобы не было двойного смещения */
  transform: none !important;
  height: 40px !important;
  width: auto !important;
  z-index: 3001 !important;     /* поверх всех панелей */
  pointer-events: auto !important;
  cursor: pointer !important;
}

.bar-controls {
  display: flex;
  align-Items: center;
  justify-content: flex-end;
  height: 100%;
  padding-right: 20px;
  box-sizing: border-box;
}

/* поиск */
.search-wrapper {
  position: relative;
  margin-right: 20px;
  overflow: visible;
}
.search-input {
  width: 200px;
  height: 32px;
  border: none;
  padding: 0 8px;
  font-size: 0.9em;
  background: #ffffff;
  box-sizing: border-box;
  outline: none;
  border-radius: 4px;
}
.search-decor {
  position: absolute;
  bottom: -10px;
  width: calc(100% + 40px);
  left: -20px;
  height: 52px;
  background: url('searche.png') no-repeat center/cover;
  pointer-events: none;
}

/* кнопка */
.action-button {
  width: 80px;
  height: 40px;
  border: none;
  padding: 0;
  cursor: pointer;
  background: url('btn-normal.png') no-repeat center/contain;
  background-color: transparent;
}
.action-button:hover {
  background-image: url('btn-hover.png');
}
.action-button:active {
  background-image: url('btn-active.png');
}

/* группы */
.group {
  margin-bottom: var(--group-gap);
}
.group h2 {
  margin-bottom: calc(var(--group-gap) * 0.25);
  color: #ffffff;
  font-family: 'BeauMarchaisC', sans-serif;
  font-size: 2em;
}

/* контейнер иконок */
.Items {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

/* карточка */
.item {
  position: relative;
  width: calc(var(--thumb-size) * var(--global-scale));
  height: calc(var(--thumb-size) * var(--global-scale));
  cursor: pointer;
}
.item img {
  width: 100%;
  height: 100%;
  transition: transform var(--transition);
}
.item:hover img,
.item.selected img {
  transform: scale(var(--thumb-hover-scale));
}

/* тултип */
.tooltip {
  position: fixed;
  box-sizing: border-box;
  width: var(--tooltip-width);
  background: var(--tooltip-bg);
  background-size: 100% 100%;
  padding: 10px;
  border-radius: 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.5);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition);
  z-index: 1000;
  text-align: center;
}
.tooltip.visible,
.item.selected .tooltip {
  opacity: 1;
}

.tooltip h3 {
  margin: 0 0 5px;
  font-size: 1em;
  color: #ffffff;
  font-family: sans-serif;
}

.tooltip p {
  margin: 0.5em 0;
  font-size: 0.9em;
  color: #EBF083;
  word-wrap: break-word;
}

/* цена */
.tooltip .tooltip-price {
  position: absolute;
  bottom: 10px;
  right: 12px;
  font-size: 1.1em;
  color: #ffffff;
}
.tooltip .tooltip-price .gold-icon {
  display: inline-block;
  vertical-align: middle;
  width: 16px;
  height: 16px;
  margin-left: 2px;
  object-fit: contain;
}

/* атрибуты */
.tooltip .attrs {
  list-style: none;
  padding: 0;
  margin: 0;
  font-size: 0.85em;
}
.tooltip .attrs li:not(.bonus-line):not(.magic-line):not(.spacer) {
  margin: 2px 0;
  color: #E7A64F;
}

/* бонус */
.tooltip .attrs li.bonus-line {
  margin: 2px 0;
  position: relative;
  text-align: center;
  color: #ffffff;
}
.tooltip .attrs li.bonus-line .bonus-text {
  display: inline-block;
  position: relative;
}
.tooltip .attrs li.bonus-line .bonus-text::before {
  content: var(--bonus-icon);
  position: absolute;
  right: calc(100% + 4px);
  top: 50%;
  transform: translateY(-50%);
  width: 25px;
  height: 25px;
  background-size: contain;
  background-repeat: no-repeat;
}

/* магия */
.tooltip .attrs li.magic-line {
  margin: 2px 0;
  text-align: center;
  color: #62B3F7;
}
.tooltip .attrs li.magic-line.magic-death { color: #000; }


.tooltip .attrs li.magic-line.magic-elemental { color: #22B14C; }
.tooltip .attrs li.magic-line .bonus-text {
  display: inline-block;
  font-weight: bold;
}

/* пустой спейсер */
.tooltip .attrs li.spacer {
  height: 1em;
}

/* контролы внутри панели */
.side-panel .scale-controls {
  position: absolute;
  top: 10px;
  left: 10px;
  display: flex;
  align-Items: center;
  gap: 12px;
}
.side-panel .scale-controls button {
  width: 36px;
  height: 36px;
  font-size: 1.8em;
  line-height: 1;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.side-panel .scale-controls span {
  color: #ffffff;
  font-size: 1.5em;
  min-width: 60px;
  text-align: center;
}

/* фильтры (под контролами масштаба) */
.side-panel .filter-controls {
  margin-top: 70px;        /* подняли ниже кнопок масштаба */
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0 10px;
  color: #ffffff;
  font-size: 1.1em;
}
.side-panel .filter-controls label {
  display: flex;
  align-Items: center;
  gap: 8px;
  cursor: pointer;
}

.side-panel .filter-controls input[type="checkbox"] {
  width: 20px;
  height: 20px;
  cursor: pointer;
}

/* кнопка сортировки */
.side-panel .filter-controls .sort-button {
  width: 40px;                /* увеличили */
  height: 40px;
  background-size: contain;
  background-repeat: no-repeat;
  border: none;
  cursor: pointer;
  align-self: flex-start;     /* влево */
}
/* делаем sort‑кнопки такими же, как attr‑фильтры */
.side-panel .filter-controls .sort-price .sort-button {
  flex: none;
  padding: 6px;
  font-size: 0.9em;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
  /* можно задать одинаковую ширину, если нужно: */
  width: 40px;
  text-align: center;
}

/* сдвиг блока "Цена" вниз */
.side-panel .filter-controls .sort-price {
  position: relative;
  top: 27px;
  right: -37px;
}


/* активное состояние совпадает с фильтрами */
.side-panel .filter-controls .sort-price .sort-button.active {
  background: #ffcc00;
}
.sort-button.sort-desc {
  background-image: url('sort-desc.png');
}
.sort-button.sort-asc {
  background-image: url('sort-asc.png');
}

/* выезжающая панель */
.side-panel {
  overflow-y: auto;
  overflow-x: hidden;
  position: fixed;
  top: var(--top-bar-height);
  right: -33.33%;
  width: 33.33%;
  height: calc(100vh - var(--top-bar-height));  /* на всю высоту экрана */
  background: rgba(0,0,0,0.5) url('panel-bg.png') center/cover;
  transition: right 0.3s ease;
  z-index: 3000;
  box-shadow: -2px 0 8px rgba(0,0,0,0.3);
}
.side-panel.open {
  right: 0;
}

/* по умолчанию все тултипы на уровне 1000 */
.tooltip {
  z-index: 1000;
}
/* тултип у hovered‑карточки — всегда выше */
.item.hovered .tooltip {
  z-index: 1100;
}

/* “Все предметы” контейнер */
#group-all {
  display: none;
}

/* кнопки фильтра по магии */
.side-panel .filter-controls .magic-filter {
  display: flex;
  align-Items: center;
  gap: 8px;
  margin-top: 10px;
}
.side-panel .filter-controls .magic-filter .filter-label {
  flex: none;
  /* при желании можно задать width: 100px; */
}
.side-panel .filter-controls .magic-filter button {
  padding: 6px;
  font-size: 0.9em;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}
.side-panel .filter-controls .magic-filter button.active {
  background: #ffcc00;
}

/* скрытый класс */
.item.hidden {
  display: none !important;
}

/* при докинге — подвинуть контент */
body.docked {
  /* прибавляем ширину панели к правому отступу */
  padding-right: calc(var(--panel-width) + 20px);
}

/* кнопка докинга рядом со scale‑кнопками */
.side-panel .scale-controls .dock-button {
  width: 36px;
  height: 36px;
  font-size: 1.2em;
  line-height: 1;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.side-panel .scale-controls .dock-button.active {
  background: #ffcc00;
}

/* --- Attribute Filter Rows --- */
.side-panel .filter-controls .attr-filter-row {
  display: flex;
  align-Items: center;
  gap: 8px;
  margin-top: 10px;
}
.side-panel .filter-controls .attr-filter-row .attr-filter-label {
  flex: none;
  /* при желании, можно задать фиксированную ширину:
     width: 120px; */
}

/* стиль самих кнопок ровно как у magic-filter */
.side-panel .filter-controls .attr-filter-row button {
  flex: none;
  padding: 6px;
  font-size: 0.9em;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}

/* активное состояние */
.side-panel .filter-controls .attr-filter-row button.active {
  background: #ffcc00;
}

.side-panel .scale-controls,
.side-panel .filter-controls {
  transform: scale(0.9);
  transform-origin: top left;
}





/* —–– бонус‑фильтр —–– */
.side-panel .bonus-filter {
  display: flex;
  flex-direction: column;
  margin-top: 20px;
  padding: 0 10px;
  color: #ffffff;
  font-size: 1.1em;
}
.side-panel .bonus-filter .filter-label {
  margin-bottom: 6px;
  font-weight: bold;
}
.side-panel .bonus-filter .dropdown {
  position: relative;
}
.side-panel .bonus-filter .dropdown-toggle {
  width: 100%;
  padding: 6px 8px;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  text-align: left;
  cursor: pointer;
}
.side-panel .bonus-filter .dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0; right: 0;
  /* max-height: 200px; */
  /* overflow-y: auto; */
  background: #ffffff;
  border-radius: 4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  display: none;
  z-index: 2500;
}
.side-panel .bonus-filter .dropdown-menu.show {
  display: block;
  /* отменяем открытие вниз */
  top: 100%;
  bottom: auto;
  /* небольшой отступ, чтобы меню не прилипало к кнопке */
  margin-bottom: 4px;
  /* чтоб сам список тоже скроллился, если много бонусов */
  /* max-height: 200px; */      /* или какая вам высота нужна */
  overflow-y: auto;
}

/* В расширённом режиме (когда .side-panel содержит класс .advanced-open)
   дропдаун открывается вверх */
.side-panel.advanced-open .bonus-filter .dropdown-menu.show {
  top: auto;
  bottom: 100%;
}

.side-panel .bonus-filter .dropdown-item {
  display: flex;
  align-Items: center;
  padding: 6px 8px;
  cursor: pointer;
}
.side-panel .bonus-filter .dropdown-item img {
  flex: none;
  margin-right: 6px;
}
.side-panel .bonus-filter .dropdown-item span {
  flex: 1;
  color: #000;
}
.side-panel .bonus-filter .dropdown-item.active,
.side-panel .bonus-filter .dropdown-item:hover {
  background: #ffcc00;
}

#group-toggle {
  /* убираем дефолтный вид */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* размер под размер ваших PNG */
  width: 24px;
  height: 24px;
  /* картинка “выключено” */
  background: url('ChkBxOff.png') no-repeat center center;
  background-size: contain;
  cursor: pointer;
  /* немного отступа справа, чтобы текст не прилегал */
  margin-right: 6px;
}

/* состояние “включено” */
#group-toggle:checked {
  /* просто меняем картинку */
  background-image: url('ChkBxOn.png');
}

/* название сайта рядом с логотипом */
.top-bar .site-title {
  position: absolute;
  left: calc(70px + 40px + 12px); /* отступ = отступ логотипа (20px) + высота логотипа (40px) + небольшой отступ */
  top: 50%;
  transform: translateY(-50%);
  color: #ffffff;
  font-family: 'BeauMarchaisC', sans-serif;
  font-size: 3em;
  pointer-events: none;
  white-space: nowrap;
}

/* разделитель-перекрытие между top-bar и контентом */
 .bar-divider {
   position: fixed;
   top: calc(var(--top-bar-height) - var(--divider-overlap));
   left: calc(-1 * var(--divider-overflow));
   width: calc(100% + var(--divider-overflow) * 2);
   height: 55px;
   background: url('Venzelup.png') repeat-x center;
   pointer-events: none;
   z-index: 2500;
  /* синхронизируем сдвиг с шапкой */
  transition: top 0.3s ease;
 }

/* все элементы, которые прячем вместе с панелью */
.top-bar .site-title,
.top-bar .bar-controls,
.bar-divider,
#page-toggle {
  /* подготовим для анимации */
  transition: transform 0.3s ease;
}

/* класс, который в JS вешаем на <body> */
body.topbar-hidden .top-bar {
  top: calc(-1 * var(--top-bar-height)) !important;
}
body.topbar-hidden .top-bar .bar-controls,
body.topbar-hidden #page-toggle {
  transform: translateY(-100%) !important;
}

/* для разделителя уезжаем выше всей шапки (+его собственной высоты) */
body.topbar-hidden .bar-divider {
  /* --top-bar-height + --divider-height — суммарно 60 + 56 = 116px */
  transform: translateY(calc(-1 * (var(--top-bar-height) + var(--divider-height)))) !important;
}

/* Поднимем отступ для body на высоту полоски + разделителя */
body {
  /* раньше было: padding-top: calc(var(--top-bar-height) + 20px);
     теперь добавим высоту divider: */
  padding-top: calc(
    var(--top-bar-height)
    + var(--divider-height)
  );
}

/*  поле поиска заблокировано — курсор “недоступно” */
.search-input:disabled {
  cursor: not-allowed;
  /* при желании можно подсветить фон:
     background-color: #f0f0f0; */
}

/* картинки не выделяются и не перетаскиваются */
.item img,
.item img {
  /* отключаем выделение текста/элемента */
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;

  /* отключаем «перетаскивание» в WebKit */
  -webkit-user-drag: none;
}

/* Простые фильтры (только характеристики) в два столбика */
#simple-filters {
  /* Убираем старые флексы/гриды */
  display: block !important;
  /* Две колонки */
  column-count: 2;
  column-gap: 8px;    /* расстояние между колонками */
  margin-top: 10px;
}
/* Простые фильтры (только характеристики) */
#simple-filters {
  display: grid !important;
  grid-template-columns: max-content max-content;
  grid-auto-rows: auto;
  column-gap: 8px;  /* расстояние между колонками */
  row-gap:    6px;  /* расстояние между строками */
  margin-top: 10px;
}
#simple-filters button {
  padding: 6px 8px;
  background: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}
#simple-filters button.active {
  background: #ffcc00;
}

.tooltip .attrs li.magic-line.magic-death {
  color: #000;
  /* однотоновая «гало» размером 0.2px */
  text-shadow: 0 0 2.3px #fff;
}

/* когда боковая панель в advanced-open (расширённом) режиме */
.side-panel.advanced-open #simple-filters {
  display: none !important;
}
/* а когда не в advanced-open, вернуть сетку */
.side-panel:not(.advanced-open) #simple-filters {
  display: grid !important;
  grid-template-columns: max-content max-content;
  grid-auto-rows: auto;
  column-gap: 8px;
  row-gap:    6px;
  margin-top: 10px;
}

/* контейнер для режимных кнопок в простом режиме */
#simple-mode-controls {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

/* сами кнопки — как в attr-filter-row */
#simple-mode-controls button {
  padding: 6px 8px;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.2s;
}
#simple-mode-controls button.active {
  background: #ffcc00;
}

/* Всегда открывать бонус-фильтр вверх */
.side-panel .bonus-filter .dropdown-menu.show {
  top: auto !important;
  bottom: 100% !important;
}




/* 1) Делаем правильный inline‑ряд для чекбокса + текста */
.common-controls .group-toggle-wrapper {
  display: inline-flex;
  align-Items: center;
  gap: 6px;
  cursor: pointer;
}
.common-controls .group-toggle-wrapper .group-toggle-label {
  /* текст не кликабельный */
  user-select: none;
  color: #ffffff;          /* подстроить под ваш дизайн */
  font-size: 1.1em;
}

/* 2) Перенастраиваем #simple-mode-controls, чтобы он был inline‑рядом рядом с чекбоксом */
.common-controls #simple-mode-controls {
  display: inline-flex;    /* вместо блок‑flex */
  align-Items: center;
  gap: 6px;
  margin-bottom: 0;        /* убрали лишний отступ снизу */
  margin-left: 12px;       /* небольшое расстояние от чекбокса */
}

/* 1) Перекроим .common-controls на flex-wrap, чтобы reset-фильтр мог переехать на новую строку */
.common-controls {
  display: flex;
  flex-wrap: wrap;
  align-Items: center;
  gap: 12px;              /* расстояние между элементами */
}

/* 2) Порядок элементов */
.common-controls .compare-select-wrapper { order: 1; }

/* 2) Зададим порядок элементов внутри .common-controls: 
     1 — sort-price, 2 — group-toggle, 3 — simple-mode-controls, 4 — reset */
.common-controls .sort-price {
  order: 3;
  flex-basis: auto;   /* занимает всю ширину, начинает новую строку */
  display: flex;      /* чтобы кнопки «↓ ↑» остались на одной линии */
  align-Items: center;
  gap: 6px;           /* при необходимости */
  margin-top: -18px;    /* дополнительный отступ сверху */
  margin-bottom: 38px;
  left: -1px;
}
.common-controls .group-toggle-wrapper {
  order: 3;
  margin-left: auto;  /* отодвинуть максимально вправо */
  display: inline-flex;
  align-Items: center;
  gap: 6px;
}
.common-controls #simple-mode-controls {
  order: 3;
}

/* 3) Увеличим сами кнопки в #simple-mode-controls */
#simple-mode-controls button {
  padding: 8px 12px;
  font-size: 1.2em;
}

/* контейнер с кнопками выбора фона */
.side-panel .background-controls {
  position: relative;
  top: -51px;
  left: 10px;
  right: 10px;
  display: flex;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(255,255,255,0.3);
}

/* сами кнопки-фоны */
.side-panel .background-controls .bg-btn {
  width: 40px;
  height: 40px;
  border: none;
  background-size: cover;
  background-position: center;
  cursor: pointer;
  border-radius: 4px;
  transition: transform 0.2s;
}
.side-panel .background-controls .bg-btn:hover {
  transform: scale(1.1);
}

/* в расширённом режиме отодвигаем bg-кнопки ниже, чтобы не налезали на фильтры */
.side-panel.advanced-open .background-controls {
  bottom: -180px; /* подберите значение под вашу высоту фильтров */
}

/* Запрет выделения текста и элементов на всей странице */
html, body, * {
  /* стандартное свойство */
  user-select: none !important;

  /* префиксы для кросс-браузерности */
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;

  /* запрет «перетаскивания» */
  -webkit-user-drag: none !important;
  -khtml-user-drag: none !important;
  -moz-user-drag: none !important;
  -o-user-drag: none !important;
  user-drag: none !important;
}

/* ==== Кнопка “О сайте” в шапке ==== */
.about-button {
  width: 80px;
  height: 40px;
  border: none;
  padding: 0;
  cursor: pointer;
  background: url('about1.png') no-repeat center/contain;
  background-color: transparent;
   position: relative;
    left: -110px;
}
.about-button:hover {
  background-image: url('about2.png');
}
.about-button:active {
  background-image: url('about3.png');
}

/* ==== Оверлей ==== */
.about-overlay,
.about-popup {
  opacity: 0;
  visibility: hidden;
  /* сначала 0.5s меняем opacity, а visibility меняем мгновенно с задержкой 0.5s */
  transition:
    opacity 0.5s ease,
    visibility 0s linear 0.5s;
}

.about-overlay.visible,
.about-popup.visible {
  opacity: 1;
  visibility: visible;
  /* когда показываем, visibility устанавливаем сразу (delay 0), а потом плывёт opacity */
  transition:
    opacity 0.5s ease,
    visibility 0s;
}

/* overlay */
.about-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background-color: rgba(0,0,0,0.5);
  z-index: 4000;
  pointer-events: none;    /* пока скрыт — не мешает кликам */
}
.about-overlay.visible {
  pointer-events: auto;    /* когда показываем — перехватывает клики */
}

/* popup */
.about-popup {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 330px;       /* подберите под свой дизайн */
  padding: 20px;
  box-sizing: border-box;
  background: none;        /* фон теперь в ::before */
  z-index: 4001;
  text-align: center;
  pointer-events: none;  /* пока скрыто — клики проходят сквозь */
}

.about-popup::before {
  content: "";
  position: absolute;         /* чтобы не влиять на .about-popup */
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 395px;            /* нужный вам размер картинки */
  height: 378px;           /* подгоняйте под пропорции */
  background: url('abwindow.png') no-repeat center/contain;
  background-size: contain;
  pointer-events: none;    /* не мешает кликам */
  z-index: -1;           /* чуть ниже текста */
}

.about-popup.visible {
  pointer-events: auto;  /* когда показываем — клики внутри обрабатываются */
}
/* картинка внутри окна */
.about-popup__image {
  display: block;
  margin: 0 auto 10px;
  max-width: 80%;
  height: auto;
}
/* текст внутри окна */
.about-popup__text {
  color: #fff;                /* или ваш цвет */
  font-size: 1em;
  line-height: 1.4;
}


/* ==== Пасхальное оверлей-изображение ==== */
.egg-overlay {
  position: fixed;
  top:    0;
  left:   0;
  width:  100vw;
  height: 100vh;
  background: rgba(0,0,0,0.8);
  display: none;
  align-Items:    center;
  justify-content: center;
  z-index: 5000; /* выше всего */
}
.egg-overlay.visible {
  display: flex;
}
.egg-overlay img {
  width: 700px;
  object-fit: contain;
}

/* контейнер-панель */
.page-panel {
  position: fixed;
  top: calc(-1 * (var(--page-panel-height) - var(--page-button-height)));
     /* из-за экрана «спрятаны» все, кроме кнопки */
  right: 470px;                   /* отступ от правого края */
  width: var(--page-panel-width);
  height: var(--page-panel-height);
  overflow: visible;
  transition: top 0.4s ease;
  z-index: 3500;
    pointer-events: none;
}

/* когда открываем — панель полностью на виду */
.page-panel.open {
  top: 0;
  pointer-events: auto;
}

/* контент панели (фон или картинка) */
.page-panel__content {
  display: block;
  width: 100%;
  height: calc(var(--page-panel-height) - var(--page-button-height));
  object-fit: cover;             /* или contain, как нужно */
    pointer-events: none;
}

/* — контейнер двух кнопок — */
.mods-buttons {
  position: absolute;
  top: 20px;    /* отступ от верха панели — подберите по своему дизайну */
  left: 10px;   /* отступ от левого края */
  right: 10px;  /* отступ от правого края */
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;    /* расстояние между кнопками */
  pointer-events: none; /* сам контейнер не блокирует клики — кнопки внутри возьмут события */
}

/* — общие стили для кнопок модов — */
.mod-btn {
  width: 100%;
  height: 50px;            /* подберите нужную высоту */
  border: none;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  cursor: pointer;
  pointer-events: auto;    /* кнопки должны ловить клики */
}

/* — кнопка Evolv — */
.Evolv-btn {
  background-image: url('Evolv1.png');
}
.Evolv-btn:hover {
  background-image: url('Evolv2.png');
}
.Evolv-btn:active {
  background-image: url('Evolv3.png');
}

/* — кнопка Vanilla — */
.Vanilla-btn {
  background-image: url('Vanilla1.png');
}
.Vanilla-btn:hover {
  background-image: url('Vanilla2.png');
}
.Vanilla-btn:active {
  background-image: url('Vanilla3.png');
}

/* — кнопка Ragnar — */
.Ragnar-btn {
  background-image: url('Ragnar1.png');
}
.Ragnar-btn:hover {
  background-image: url('Ragnar2.png');
}
.Ragnar-btn:active {
  background-image: url('Ragnar3.png');
}

/* — кнопка Crusad — */
.Crusad-btn {
  background-image: url('Crusad1.png');
}
.Crusad-btn:hover {
  background-image: url('Crusad2.png');
}
.Crusad-btn:active {
  background-image: url('Crusad3.png');
}

/* — кнопка Old_Hor — */
.Old_Hor-btn {
  background-image: url('Old_Hor1.png');
}
.Old_Hor-btn:hover {
  background-image: url('Old_Hor2.png');
}
.Old_Hor-btn:active {
  background-image: url('Old_Hor3.png');
}

/* — кнопка Pravl — */
.Pravl-btn {
  background-image: url('Pravl1.png');
}
.Pravl-btn:hover {
  background-image: url('Pravl2.png');
}
.Pravl-btn:active {
  background-image: url('Pravl3.png');
}

/* — кнопка Discover — */
.Discover-btn {
  background-image: url('Discover1.png');
}
.Discover-btn:hover {
  background-image: url('Discover2.png');
}
.Discover-btn:active {
  background-image: url('Discover3.png');
}

/* — кнопка Orders — */
.Orders-btn {
  background-image: url('Orders1.png');
}
.Orders-btn:hover {
  background-image: url('Orders2.png');
}
.Orders-btn:active {
  background-image: url('Orders3.png');
}

/* с плюсиком, но экранирование */
.KREST\+ {
  background-image: url('KREST1.png');
}
.KREST\+:hover {
  background-image: url('KREST2.png');
}
.KREST\+:active {
  background-image: url('KREST3.png');
}

/* — кнопка Xxxx — */
.Xxxx-btn {
  background-image: url('Xxxx1.png');
}
.Xxxx-btn:hover {
  background-image: url('Xxxx2.png');
}
.Xxxx-btn:active {
  background-image: url('Xxxx3.png');
}


/* ровно по спрайту, без растяжений */
.page-toggle {
  flex: none;             /* не растягиваться в .bar-controls */
  width: 192px;            /* подберите под свой page.png */
  height: 53px;
  padding: 0;
  margin: 0 8px;          /* отступ от соседних кнопок */
  background: url('page.png') no-repeat center/contain;
  background-color: transparent;
  border: none;
  cursor: pointer;
  display: block;
  box-sizing: content-box;
  position: relative;     /* или absolute, если вы позиционировали её так */
  top: -2px;              /* настроить чтобы центрировать в .top-bar */
  right: -20px;            /* подвинуть от края по вкусу */
  z-index: 2100;          /* над .top-bar */
  pointer-events: auto;
}

/* Иконка режима слева от текста */
.page-toggle .mode-icon {
  width: 31px;
  height: 31px;
  margin-right: 146px;
  vertical-align: middle;
  pointer-events: none; /* клики должны проходить на кнопку */
}

.page-toggle-text {
  font-family: 'BeauMarchaisC', sans-serif;
  font-size: 3em;          /* подберите под свой дизайн */
  color: #ffffff;            /* цвет надписи */
  text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
  pointer-events: none;      /* чтобы клики шли сквозь текст на кнопку */
  user-select: none;         /* текст нельзя выделить */
  left: 50px; top: 0px;
  position: absolute;
}

/* — hover‑эффект: когда панель закрыта, при наведении чуть «выезжаем» вниз */
.page-panel:not(.open):hover:not(.closing) {
  /* смещаем на +5px от исходного «спрятанного» положения */
  top: calc(
    -1 * (var(--page-panel-height) - var(--page-button-height))
    + 5px
  ) !important;
  /* моментально, без анимации */
  transition: none !important;
}

/* Универсальный стиль “как у остальных кнопок” */
.side-panel .filter-controls #toggle-advanced,
.side-panel .filter-controls #reset-filters {
  padding: 6px 8px;
  background: #ffffff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9em;
  transition: background 0.2s;
}

/* Ховер-эффект общий */
.side-panel .filter-controls #toggle-advanced:hover,
.side-panel .filter-controls #reset-filters:hover {
  background: #f0f0f0;
}

/* Специально для “Сбросить” — красный оттенок */
.side-panel .filter-controls #reset-filters {
  background: #f8d7da;       /* светло-красный фон */
  color: #721c24;            /* темно-красный текст */
}
.side-panel .filter-controls #reset-filters:hover {
  background: #f5c6cb;       /* чуть ярче при ховере */
}


.compare-toggle-wrapper {
  display: none;
  align-Items: center;
  gap: 4px;
  color: #fff;
  font-size: 0.9em;
  margin-left: 12px;
}
.compare-toggle-wrapper input {
	display: none;
  width: 16px;
  height: 16px;
  cursor: pointer;
}
.compare-toggle-wrapper span {
	display: none;
  user-select: none;
  cursor: pointer;
}

#compare-select { display: none; }


.compare-select-wrapper {
  display: inline-flex;
  align-Items: center;
  gap: 4px;
  margin-left: -22px;
}
.compare-select-wrapper select {
  padding: 2px 4px;
  cursor: pointer;
}

/* Увеличиваем ширину и размер «Сравнить с» */
.compare-select-wrapper .dropdown-toggle {
  min-width: 160px;      /* желаемая минимальная ширина */
  padding: 8px 12px;     /* чуть больше паддингов */
  font-size: 1.1em;      /* чуть побольше шрифт */
}

.compare-select-wrapper .dropdown-menu {
  min-width: 160px;      /* совпадает с кнопкой */
}

/* чуть просторнее пункты */
.compare-select-wrapper .dropdown-item {
  padding: 8px 12px;
}

.compare-select-wrapper > span {
  display: inline-block; /* чтобы margin-top работал надёжнее */
  font-weight: bold;
  margin-top: 20px;       /* подберите значение «на глаз» */
}

/* Скрываем блок простых режимных кнопок в advanced-open */
.side-panel.advanced-open #simple-mode-controls {
  display: none !important;
}

/* И на случай, если нужен обратный явный показ в обычном режиме */
.side-panel:not(.advanced-open) #simple-mode-controls {
  display: flex; /* или inline-flex, как вам нужно */
}

/* сделать «Магия» и «Цена» чуть больше и жирным */
.side-panel .filter-controls .filter-label,
.side-panel .filter-controls .sort-price > span {
  font-weight: 700;      /* или bold */
  font-size: 1.0em;      /* подберите желаемый размер */
}

/* кастомный чекбокс “Только отличия” */
#diff-only {
  /* убираем дефолтный вид */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* размер под размер ваших PNG */
  width: 24px;
  height: 24px;
  /* фон для выключенного состояния */
  background: url('ChkCompareOf.png') no-repeat center center;
  background-size: contain;
  cursor: pointer;
  margin-right: 6px; /* отступ до текста */
}

/* когда включено — переключаем фон */
#diff-only:checked {
  background-image: url('ChkCompareOn.png');
}

.side-panel .compare-select-wrapper .dropdown-menu.show {
  top: 100% !important;
  bottom: auto !important;
}







/* ── Перестроим порядок внутри common-controls ── */
.side-panel .filter-controls .common-controls {
  display: flex;
  flex-wrap: wrap;
  align-Items: center;
  gap: 12px;
}

/* 1) “Сравнить с” — первая строка */
.side-panel .filter-controls .compare-select-wrapper {
  order: 1;
  flex-basis: 100%;       /* ← теперь на всю ширину */
  display: inline-flex;
  align-Items: center;
  gap: 6px;
  padding-left: 21px;
}

/* 2) “Только отличия” — вторая строка */
.side-panel .filter-controls .diff-toggle-wrapper {
  order: 2;
  flex-basis: auto;
  display: inline-flex;
  align-Items: center;
  gap: 6px;
}

/* 3) “Группировка” — рядом с “Только отличия” */
.side-panel .filter-controls .group-toggle-wrapper {
  order: 3;
  flex-basis: auto;
  display: inline-flex;
  align-Items: center;
  gap: 6px;
  margin-left: 24px;
}

/* 4) “Цена” с кнопками — отдельная третья строка */
.side-panel .filter-controls .sort-price {
  order: 4;
  flex-basis: 100%;      /* займёт всю строку */
  display: flex;         /* кнопки останутся в ряд */
  align-Items: center;
  gap: 6px;
  margin-top: 33;         /* убираем старые смещения */
  margin-bottom: 1;
}


/* контейнер чекбокса рядом с масштабом */
.side-panel .scale-controls .bg-toggle-wrapper {
  display: inline-flex;
  align-Items: center;
  gap: 6px;
  margin-left: 12px;              /* отступ от кнопок масштаба */
  color: #ffffff;                 /* надпись белая, как все в шапке */
  font-size: 0.9em;
  cursor: pointer;
}

.side-panel .scale-controls .bg-toggle-wrapper input {
  /* можно стилизовать чекбокс по вашему вкусу или оставить дефолт */
  width: 20px;
  height: 20px;
  cursor: pointer;
}

/* при отключённом фоне убираем картинку, сохраняя полупрозрачный фон */
.side-panel.no-bg {
  background-image: none !important;
  background-color: rgba(0,0,0,0.5) !important;
}

/* ────────── Кастомный чекбокс для “Фон панели” ────────── */
#bg-toggle {
  /* убираем дефолтный вид */
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;
  /* задаём размер под ваши PNG */
  width: 24px;
  height: 24px;
  /* фон — состояние “включено” */
  background: url('ChkBxOn.png') no-repeat center center;
  background-size: contain;
  cursor: pointer;
  margin-right: 6px; /* если нужен отступ до текста */
}

/* состояние “выключено” */
#bg-toggle:not(:checked) {
  background-image: url('ChkBxOff.png');
}

/* текст лейбла не кликабельный */
.bg-toggle-wrapper span {
  user-select: none;
  cursor: pointer;
  color: #ffffff;
}

/* === Кастомный чекбокс "Сравнить с Vanilla" === */
#compare-vanilla {
  /* убираем дефолтный вид */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* задаём размер под размер ваших PNG */
  width: 24px;
  height: 24px;
  /* фон для выключенного состояния */
  background: url('ChkBxOff.png') no-repeat center center;
  background-size: contain;
  cursor: pointer;
  margin-right: 6px; /* отступ до текста */
}

/* состояние “включено” */
#compare-vanilla:checked {
  background-image: url('ChkBxOn.png');
}

/* состояние “недоступно” */
#compare-vanilla:disabled {
  /* просто меняем картинку у самого input */
  background-image: url('ChkBxBlock.png');
  cursor: not-allowed;
}













/* === Mobile Overrides === */
@media screen and (max-width: 700px) {
  /* 1 & 3. Масштаб элементов и высота шапки */
  :root {
    --global-scale: 1.7;       /* масштаб карточек */
    --top-bar-height: 90px;   /* шапка x2 */
  }

  /* 2. Масштаб тултипа */
  .tooltip {
    transform: scale(0.9);
    transform-origin: top left;
  }

  .action-button {
    position: relative !important;
    left: 10px !important;
  }

  /* 4. Поиск в два раза выше */
  .search-input {
    height: 45px; /* вместо 32px */
  }

  /* 6. «О сайте» левее и ниже */
  .about-button {
    left: -10px;      /* сдвинуть к левому краю */
    top: auto;
    bottom: -20px;    /* опустить ближе к низу шапки */
  }
  
  /* Переопределяем фикс позишн для логотипа на мобилке */
  body.topbar-hidden .top-bar .logo,
  .top-bar .logo {
    position: fixed !important;
    left: 5px !important;     /* новый отступ */
    /* центр по новой высоте шапки (90px) */
    top: calc(var(--top-bar-height)/2 - 40px) !important;
    transform: none !important;
  }
  
    /* 3. Скрыть название сайта */
  .top-bar .site-title {
    display: none !important;
  }
  
    /* 4. Растянуть search-decor по высоте (и не обрезать) */
  .search-wrapper {
    overflow: visible !important; /* чтобы декор не обрезался */
	margin-top: 30px !important;  /* подвинуть вниз на 10px */
	left: 10px;
  }
  .search-decor {
    bottom: 0 !important;
    top: 0 !important;
    height: 100% !important;      /* тянем до полной высоты контейнера */
    background-size: cover !important;
  }
  
    /* 7. Фильтры (side-panel) растянуть на всю ширину экрана */
  .side-panel.open {
    width: 100% ;
    right: 0 ;
  }
  
    /* 6. «Моды» (page-toggle) сместить влево */
  .page-toggle {
	top: -10px !important;
    left: 90px !important;        /* прижать к левому краю */
	transform: scale(0.7) !important;
    transform-origin: center;
  }
  
    /* Перенастраиваем саму выезжающую панель */
  .page-panel {
    width: 100% !important;       /* на всю ширину экрана */
    right: 0 !important;          /* от правого края 0 */
    left: 0 !important;           /* от левого края 0 */
    /* высоту можно оставить, если устраивает: var(--page-panel-height) */

  }

  /* Когда панель открыта — убираем старый «спрятанный» top */
  .page-panel.open {
    top: 0 !important;
  }

  /* Подвинем кнопки внутри панели (mods-buttons) чуть вниз/вправо */
  .page-panel .mods-buttons {
    top: 60px !important;   /* отступ от верха панели */
    left: 10px !important;  /* от левого края панели */
    right: 10px !important; /* небольшой отступ справа */
    grid-template-columns: repeat(2, 1fr) !important;
  }
  
  /* 1) Шапка панели — ровно по контенту */
  .side-panel .scale-controls {
    flex: none         !important;
    overflow: visible  !important;
    box-sizing: border-box;
  }

  /* 2) Основная зона фильтров — растягивается и скроллится */
  .side-panel .filter-controls {
    flex: 1 1 auto     !important;
    overflow-y: auto   !important;
    /* Уберите лишние отступы, если они есть */
    padding: 10px      !important;
    box-sizing: border-box;
  }

  /* 3) Футер-кнопки фонов — по содержимому, прижаты внизу через margin-top:auto */
  .side-panel .background-controls {
    flex: none         !important;
    margin-top: auto   !important;
    position: relative !important;
    /* если фон или паддинги не нужны, можно удалить background/padding */
    background: none   !important;
    padding: 8px       !important;
    box-sizing: border-box;
  }
  
  
  
}


/* === Tablet Overrides === */
@media screen and (min-width: 700px) and (max-width: 1180px) {
	
  /* 2. Масштаб тултипа */
  .tooltip {
    transform: scale(1.0);
    transform-origin: top left;
  }
	
	  /* Сдвинуть название сайта чуть левее */
  .top-bar .site-title {
    left: 81px !important; /* уменьшили отступ от логотипа */
	    /* Позволяем перенос слов и задаём желаемую ширину */
    white-space: normal !important;
    width: 150px !important;     /* подберите под ваш макет */
    /* Меньший размер шрифта */
    font-size: 1.9em !important; /* вместо 3em */
    /* Межстрочный интервал для читаемости */
    line-height: 1 !important;
  }
	
  /* 1) Сдвинем кнопку «О сайте» правее */
  .about-button {
    left: 5px !important;     /* подвинуть от левого края */
    /* при необходимости скорректируйте bottom/top */
  }

  
    /* Соответственно — панель модов (page-panel) тоже рядом с кнопкой */
  .page-panel {
    right: 301px !important; /* совпадает с позицией кнопки */
    left: auto !important;
  }
  
    .action-button {
    position: relative !important;
    left: 16px !important;
  }
  
  /* Переопределяем фикс позишн для логотипа на планшете */
  body.topbar-hidden .top-bar .logo,
  .top-bar .logo {
    position: fixed !important;
    left: 5px !important;      /* новый отступ */
    /* центр по высоте шапки в этом диапазоне (по-прежнему 60px) */
    top: calc(var(--top-bar-height)/2 - 20px) !important;
    transform: none !important;
  }
  
    /* 3) Футер-кнопки фонов — по содержимому, прижаты внизу через margin-top:auto */
  .side-panel .background-controls {
    position: relative !important;
    /* если фон или паддинги не нужны, можно удалить background/padding */
top: -51px;
  }
  
      /* 4. Растянуть search-decor по высоте (и не обрезать) */
  .search-wrapper {
    overflow: visible !important; /* чтобы декор не обрезался */

	left: 20px;
  }

  /* делаем боковую панель шириной половину экрана */
  .side-panel.open {
    width: 50% !important;
    right: 0 !important;
  }
  
    /* 1) Перенастраиваем ширину панели через CSS‑переменную */
  :root {
    --panel-width: 50%;
  }

  /* 2) Когда у вас включён “докинг” (body.docked), добавляем отступ справа */
  body.docked {
    /* 20px — это ваш обычный отступ; если он отличается, скорректируйте */
    padding-right: calc(var(--panel-width) + 20px) !important;
  }
  
}

